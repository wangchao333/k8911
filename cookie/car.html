<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		  <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">

	</head>
	
	
	<body>
		  
		  <div class="container" style="margin-top:30px">
		  	
		  	 <h1 class="text-center">我的购物车</h1>
		   <a href="shop.html" class="pull-right">
		   		继续购物
		   
		   </a> 
		   
		   <div class="clearfix">
		   	
		   </div>
		 <hr />
		  	  <table border="" class="table table-bordered table-hover" cellspacing="" cellpadding="">
		  	  	<tr>
		  	  		<th  class="text-center">商品编号</th>
		  	  		<th  class="text-center">商品名称</th>
		  	  		<th  class="text-center">商品价格</th>
		  	  		<th  class="text-center">商品数量</th>
		  	  				<th  class="text-center">商品总价</th>
		  	  		<th  class="text-center">操作</th>
		  	  		
		  	  	</tr>
		  	  	
		  	  	<tr id="end">
		  	  		<td colspan="6" class="text-right">
		  	  			
		  	  			 商品总价：<span id="total" class="text-warning">￥</span>
		  	  			  <a href="" class="btn btn-danger btn-lg">去结算</a>
		  	  		</td>
		  	  	</tr>
		  	  </table>
		  </div>
	</body>
	<script src="../jq-day01/js/jquery3.min.js"></script>
	 <script>
	 	
	 var arr = document.cookie.split(";");
	 
	  //var data;
	     
	        var data =  arr.filter(function(val){
	        	
	        	if(val.indexOf("item") >0){
	        		
	        		return true;
	        	}
	        	// console.log(val)
	        })
	        
	       console.log(data)
	     
	         var car = data[0].split("=")[1]
	         
	         car = JSON.parse(car);
	         
	         var  sum =0;
	         for(k in car){
	         	
	         	var totalPrice = parseInt(car[k].count)*parseInt(car[k].price)
	         	
	         	 sum+=totalPrice;
	         	
	         	var str = `	<tr>
		  	  		<th  class="text-center">${car[k].bookid}</th>
		  	  		<th  class="text-center">${car[k].bookName}</th>
		  	  		<th  class="text-center">${car[k].price}</th>
		  	  		<th  class="text-center">${car[k].count}</th>
		  	  				<th  class="text-center">${totalPrice}</th>
		  	  		<th  class="text-center"><a href="#">移除</a></th>
		  	  		
		  	  	</tr>
		  	  	`;
		  	  	
		  	  	$("#end").before(str);
	         }
	         
	         $("#total").html("￥："+sum)
	         
	 //console.log(car)
	 </script>
</html>
