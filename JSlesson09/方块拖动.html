<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>

#lock{
	width: 200px;
	height:200px;
	position: absolute;
	background-color:green;
	cursor:move;
   }
</style>
</head>
<body>
<div id="lock">
</div>
</body>
<script>
 var lock = document.getElementById("lock");
 lock.onmousedown = function(e){
      var oEvent = e||event;
          // 鼠标到浏览器横向的距离-盒子左边到浏览器的距离
      var x = oEvent.clientX - lock.offsetLeft;  
       // 鼠标到浏览器纵向的距离-盒子顶部到浏览器的距离
      var y = oEvent.clientY - lock.offsetTop;
      document.onmousemove = function(e){
        var oEvent = e||event;
            // 盒子到浏览器的左边距
        var left =  oEvent.clientX-x;
         // 让鼠标移动盒子到浏览器左边缘的时候则盒子移动停止
        if(left<0)left = 0;  
        // 让鼠标移动盒子到浏览器顶部边缘的时候则盒子移动停止
         if(top<0) top = 0;
         if(left>max1)left = max1;
         if(top>max2)top = max2;
         // 盒子到浏览器的上边距
        var top  =  oEvent.clientY-y;
          // 可视宽度-盒子宽度 = 最大宽度
          var max1 = document.documentElement.clientWidth ||document.body.clientWidth-lock.offsetWidth;
           //  可视高度-盒子高度 = 最大高度
        var max2 = document.documentElement.clientHeight ||document.body.clientHeight-lock.offsetHeight;

        lock.style.left = left + "px";
        lock.style.top = top + "px";
      }
 }
       // 当鼠标按键抬起时清空鼠标移动div 事件
     lock.onmouseup = function(){
     	document.onmousemove = null;
     }
</script>
</html>